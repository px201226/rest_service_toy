{"remainingRequest":"C:\\Users\\Lee-Gi-Su\\IdeaProjects\\restapi\\springboot_board_with_vuejs\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Lee-Gi-Su\\IdeaProjects\\restapi\\springboot_board_with_vuejs\\src\\api\\http.js","dependencies":[{"path":"C:\\Users\\Lee-Gi-Su\\IdeaProjects\\restapi\\springboot_board_with_vuejs\\src\\api\\http.js","mtime":1612856450716},{"path":"C:\\Users\\Lee-Gi-Su\\IdeaProjects\\restapi\\springboot_board_with_vuejs\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Lee-Gi-Su\\IdeaProjects\\restapi\\springboot_board_with_vuejs\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCBzdG9yZSBmcm9tICcuLi9zdG9yZSc7CmltcG9ydCB7IHNldFRva2VuSW5Mb2NhbFN0b3JhZ2UsIHNldEFjZXNzVG9rZW5JbkxvY2FsU3RvcmFnZSwgc2V0UmVmcmVzaFRva2VuSW5Mb2NhbFN0b3JhZ2UgfSBmcm9tICIuLi9zdG9yZS90b2tlbiI7CmltcG9ydCB7IHNldFNuYWNrQmFySW5mbyB9IGZyb20gIi4uL2FwaS9jb21tb25fYXBpIjsKdmFyIGluc3RhbmNlID0gYXhpb3MuY3JlYXRlKHsKICBiYXNlVVJMOiAiaHR0cDovL2VjMi0xMy0xMjUtMTcwLTIxMC5hcC1ub3J0aGVhc3QtMi5jb21wdXRlLmFtYXpvbmF3cy5jb206ODA4MC8iIC8vYmFzZVVSTCA6ICJodHRwOi8vbG9jYWxob3N0OjgwODAiLAogIC8vd2l0aENyZWRlbnRpYWxzOiB0cnVlLAkJCQkvLyDshKTsoJXtlbTslbwg7L+g7YKk6rCAIFJlcXVlc3Tsl5Ag7KCA7J6l65CY7Ja0IOyEuOyFmOydtCDsnKDsp4DrkKgKCn0pOwovKg0KICAgIOuqqOuToCDsmpTssq0g7KCEIGhlYWRlcuyXkCBhY2Nlc3NfdG9rZW7snYQg64u07JWEIOyghOyGoe2VnOuLpC4NCiAqLwoKaW5zdGFuY2UuaW50ZXJjZXB0b3JzLnJlcXVlc3QudXNlKGZ1bmN0aW9uIChjb25maWcpIHsKICB2YXIgand0VG9rZW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYWNjZXNzX3Rva2VuJyk7CgogIGlmIChqd3RUb2tlbiAhPT0gbnVsbCAmJiBqd3RUb2tlbiAhPT0gIiIpIHsKICAgIGNvbmZpZy5oZWFkZXJzLkF1dGhvcml6YXRpb24gPSAiYmVhcmVyICIgKyBqd3RUb2tlbjsgLy9jb25maWcuaGVhZGVycy5jb21tb25bJ1gtQVVUSC1UT0tFTiddID0gand0VG9rZW47CiAgfQoKICBjb25zb2xlLmxvZygnSW50ZXJjZXB0b3JzIFJlcXVlc3QgaXMnLCBjb25maWcsIG5ldyBEYXRlKCkpOwogIHJldHVybiBjb25maWc7Cn0sIGZ1bmN0aW9uIChlcnJvcikgewogIGNvbnNvbGUubG9nKCdJbnRlcmNlcHRvcnMgUmVxdWVzdCBFcnJvciBpcycsIGVycm9yLnJlc3BvbnNlLCBuZXcgRGF0ZSgpKTsKICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwp9KTsKaW5zdGFuY2UuaW50ZXJjZXB0b3JzLnJlc3BvbnNlLnVzZShmdW5jdGlvbiAocmVzcG9uc2UpIHsKICBjb25zb2xlLmxvZygnSW50ZXJjZXB0b3JzIFJlc3BvbnNlIGlzICcsIHJlc3BvbnNlLCBuZXcgRGF0ZSgpKTsKICBzdG9yZS5zdGF0ZS5jb21tb24ubG9hZGluZyA9IGZhbHNlOwogIHJldHVybiByZXNwb25zZTsKfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgY29uc29sZS5sb2coJ0ludGVyY2VwdG9ycyBSZXNwb25zZSBFcnJvciBpcyAnLCBlcnJvci5yZXNwb25zZSwgbmV3IERhdGUoKSk7CiAgc3RvcmUuc3RhdGUuY29tbW9uLmxvYWRpbmcgPSBmYWxzZTsKCiAgaWYgKCFlcnJvci5yZXNwb25zZSkgewogICAgc3RvcmUuY29tbWl0KCdORVRXT1JLX0VSUk9SJyk7CiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwogIH0KCiAgdmFyIHN0YXR1cyA9IGVycm9yLnJlc3BvbnNlLnN0YXR1czsKCiAgaWYgKHN0YXR1cyA9PT0gNDA0KSB7CiAgICBzdG9yZS5jb21taXQoJ1BVU0hfRVJST1JfUEFHRScpOwogICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKICB9CgogIGlmIChzdGF0dXMgPT09IDQwMCkgewogICAgc3RvcmUuY29tbWl0KCdPUEVOX01PREFMJywgewogICAgICB0aXRsZTogJ+yXkOufrCcsCiAgICAgIGNvbnRlbnQ6ICLsnoXroKXsnbQg7Jis67CU66W07KeAIOyViuyKteuLiOuLpCIsCiAgICAgIG9wdGlvbjE6ICfri6vquLAnCiAgICB9KTsKICB9CgogIGlmIChlcnJvci5jb25maWcgJiYgZXJyb3IucmVzcG9uc2UgJiYgc3RhdHVzID09PSA0MDEpIHsKICAgIHZhciBlcnJvckRhdGEgPSBlcnJvci5yZXNwb25zZS5kYXRhLm1lc3NhZ2U7CgogICAgaWYgKGVycm9yRGF0YSA9PT0gIu2GoO2BsCDsnKDtmqjquLDqsITsnbQg7KeA64Ks7Iq164uI64ukIikgewogICAgICByZXR1cm4gYXR0ZW1wdFJlZnJlc2hUb2tlbigpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIGVycm9yLmNvbmZpZy5oZWFkZXJzLkF1dGhvcml6YXRpb24gPSAiYmVhcmVyICIgKyBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYWNjZXNzX3Rva2VuJyk7CiAgICAgICAgcmV0dXJuIGluc3RhbmNlLnJlcXVlc3QoZXJyb3IuY29uZmlnKTsKICAgICAgfSk7CiAgICB9IGVsc2UgewogICAgICBzdG9yZS5jb21taXQoJ09QRU5fU05BQ0tCQVInLCBzZXRTbmFja0JhckluZm8oJ+2GoO2BsCDsoJXrs7TqsIAg7J6Y66q765CY7JeI7Iq164uI64ukLiDri6Tsi5wg66Gc6re47J24IO2VtOyjvOyEuOyalCcsICdlcnJvcicsICd0b3AnKSk7CiAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCJhY2Nlc3NfdG9rZW4iKTsKICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oInJlZnJlc2hfdG9rZW4iKTsKICAgIH0KICB9CgogIGlmIChzdGF0dXMgPT09IDQwMykgewogICAgc3RvcmUuY29tbWl0KCdPUEVOX1NOQUNLQkFSJywgc2V0U25hY2tCYXJJbmZvKCLqtoztlZzsnbQg7JeG7Iq164uI64ukIiwgJ2Vycm9yJywgJ3RvcCcpKTsKICB9CgogIGlmIChzdGF0dXMgPT09IDUwMCkgewogICAgc3RvcmUuY29tbWl0KCdPUEVOX01PREFMJywgewogICAgICB0aXRsZTogJ+yLpO2MqCcsCiAgICAgIGNvbnRlbnQ6IGVycm9yLnJlc3BvbnNlLmRhdGEubWVzc2FnZSwKICAgICAgb3B0aW9uMTogJ+uLq+q4sCcKICAgIH0pOwogIH0KCiAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKfSk7CgpmdW5jdGlvbiByZXF1ZXN0UmVmcmVzaFRva2VuKCkgewogIHZhciBmb3JtID0gbmV3IEZvcm1EYXRhKCk7CiAgZm9ybS5hcHBlbmQoImdyYW50X3R5cGUiLCAicmVmcmVzaF90b2tlbiIpOwogIGZvcm0uYXBwZW5kKCdyZWZyZXNoX3Rva2VuJywgbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3JlZnJlc2hfdG9rZW4nKSk7CiAgdmFyIHJlcXVlc3REYXRhID0gewogICAgdXJsOiAiIi5jb25jYXQocHJvY2Vzcy5lbnYuVlVFX0FQUF9CQVNFVVJMLCAiL29hdXRoL3Rva2VuIiksCiAgICBtZXRob2Q6ICJQT1NUIiwKICAgIGF1dGg6IHsKICAgICAgdXNlcm5hbWU6IHByb2Nlc3MuZW52LlZVRV9BUFBfQ0xJRU5USUQsCiAgICAgIHBhc3N3b3JkOiBwcm9jZXNzLmVudi5WVUVfQVBQX0NMSUVOVFNFQ1JFVAogICAgfSwKICAgIGRhdGE6IGZvcm0KICB9OwogIHJldHVybiBpbnN0YW5jZShyZXF1ZXN0RGF0YSk7Cn0KCmZ1bmN0aW9uIGF0dGVtcHRSZWZyZXNoVG9rZW4oKSB7CiAgc3RvcmUuY29tbWl0KCdPUEVOX1NOQUNLQkFSJywgc2V0U25hY2tCYXJJbmZvKCfthqDtgbDsnbQg66eM66OM65CY7Ja0IOyerOuwnOq4iSDtlanri4jri6QuJywgJ2Vycm9yJywgJ3RvcCcpKTsKICByZXR1cm4gcmVxdWVzdFJlZnJlc2hUb2tlbigpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgc2V0QWNlc3NUb2tlbkluTG9jYWxTdG9yYWdlKHJlcy5kYXRhLmFjY2Vzc190b2tlbik7CiAgICBzdG9yZS5jb21taXQoJ09QRU5fU05BQ0tCQVInLCBzZXRTbmFja0JhckluZm8oJ+2GoO2BsOydtCDsnqzrsJzquIkg65CY7JeI7Iq164uI64ukLicsICdpbmZvJywgJ3RvcCcpKTsKICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7CiAgICBzdG9yZS5jb21taXQoJ09QRU5fU05BQ0tCQVInLCBzZXRTbmFja0JhckluZm8oJ1JlZnJlc2ggVG9rZW7snbQg66eM66OM65CY7JeI7Iq164uI64ukLiDri6Tsi5wg7ZWc67KIIOuhnOq3uOyduO2VtOyjvOyEuOyalC4nLCAnZXJyb3InLCAndG9wJykpOwogICAgc3RvcmUuY29tbWl0KCdMT0dPVVQnKTsKICB9KTsKfQoKZXhwb3J0IGRlZmF1bHQgaW5zdGFuY2U7"},{"version":3,"sources":["C:/Users/Lee-Gi-Su/IdeaProjects/restapi/springboot_board_with_vuejs/src/api/http.js"],"names":["axios","store","setTokenInLocalStorage","setAcessTokenInLocalStorage","setRefreshTokenInLocalStorage","setSnackBarInfo","instance","create","baseURL","interceptors","request","use","config","jwtToken","localStorage","getItem","headers","Authorization","console","log","Date","error","response","Promise","reject","state","common","loading","commit","status","title","content","option1","errorData","data","message","attemptRefreshToken","then","removeItem","requestRefreshToken","form","FormData","append","requestData","url","process","env","VUE_APP_BASEURL","method","auth","username","VUE_APP_CLIENTID","password","VUE_APP_CLIENTSECRET","res","access_token","catch"],"mappings":"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","sourcesContent":["import axios from 'axios';\r\nimport store from '../store';\r\nimport {setTokenInLocalStorage,setAcessTokenInLocalStorage,setRefreshTokenInLocalStorage} from \"../store/token\"\r\nimport {setSnackBarInfo} from \"../api/common_api\"\r\nconst instance = axios.create({\r\n\tbaseURL : \"http://ec2-13-125-170-210.ap-northeast-2.compute.amazonaws.com:8080/\",\r\n\t//baseURL : \"http://localhost:8080\",\r\n\t//withCredentials: true,\t\t\t\t// 설정해야 쿠키가 Request에 저장되어 세션이 유지됨\r\n});\r\n\r\n\r\n/*\r\n    모든 요청 전 header에 access_token을 담아 전송한다.\r\n */\r\ninstance.interceptors.request.use(\r\n    config => {\r\n\t\tlet jwtToken = localStorage.getItem('access_token');\r\n\t\r\n        if ((jwtToken !== null) && (jwtToken !== \"\")) {\r\n\t\t\t\r\n\t\t\tconfig.headers.Authorization = \"bearer \" + jwtToken;\r\n\t\t\t//config.headers.common['X-AUTH-TOKEN'] = jwtToken;\r\n        }\r\n         console.log('Interceptors Request is', config, new Date());\r\n        return config\r\n    },\r\n    error => {\r\n         console.log('Interceptors Request Error is', error.response, new Date());\r\n        return Promise.reject(error);\r\n    }\r\n);\r\n\r\n\r\ninstance.interceptors.response.use(\r\n   response => {\r\n\t    console.log('Interceptors Response is ', response, new Date());\r\n\t   store.state.common.loading = false;\r\n\t\treturn response;\r\n   },\r\n   function (error) {\r\n\t    console.log('Interceptors Response Error is ', error.response, new Date());\r\n\t   store.state.common.loading = false;\r\n\r\n\t   if (!error.response) {\r\n\t\t\r\n\t\t   store.commit('NETWORK_ERROR')\r\n\t\t   return Promise.reject(error);\r\n\t   }\r\n\r\n\t   let status = error.response.status;\r\n\t   if (status === 404) {\r\n\t\t   store.commit('PUSH_ERROR_PAGE');\r\n\t\t   return Promise.reject(error);\r\n\t   }\r\n\r\n\t   if( status === 400){\r\n\t\t\tstore.commit('OPEN_MODAL', {title: '에러', content: \"입력이 올바르지 않습니다\", option1: '닫기',});\r\n\t   }\r\n\t   if (error.config && error.response && status === 401) {\r\n\t\t   let errorData = error.response.data.message;\r\n\t\t \r\n\r\n\t\t   if (errorData === \"토큰 유효기간이 지났습니다\") {\r\n\t\t\t   return attemptRefreshToken().then(()=>{\r\n\t\t\t\terror.config.headers.Authorization = \"bearer \" + localStorage.getItem('access_token');\r\n\t\t\t\treturn instance.request(error.config);\r\n\t\t\t});\r\n\t\t   } else {\r\n\t\t\r\n\t\t\t   store.commit('OPEN_SNACKBAR', setSnackBarInfo('토큰 정보가 잘못되었습니다. 다시 로그인 해주세요', 'error', 'top'));\r\n\t\t\t   localStorage.removeItem(\"access_token\");\r\n\t\t\t   localStorage.removeItem(\"refresh_token\");\r\n\t\t\t}\r\n\t   }\r\n\r\n\t   if(status === 403){\r\n\t\t\tstore.commit('OPEN_SNACKBAR', setSnackBarInfo(\"권한이 없습니다\", 'error', 'top'))\r\n\t   }\r\n\r\n\t   if(status === 500){\r\n\t\t   store.commit('OPEN_MODAL', {title: '실패', content: error.response.data.message, option1: '닫기',});\r\n\t   }\r\n\t   return Promise.reject(error);\r\n   }\r\n);\r\n\r\n\r\nfunction requestRefreshToken() {\r\n    let form = new FormData();\r\n    form.append(\"grant_type\", \"refresh_token\");\r\n    form.append('refresh_token', localStorage.getItem('refresh_token'));\r\n    const requestData = {\r\n        url: `${process.env.VUE_APP_BASEURL}/oauth/token`,\r\n        method: \"POST\",\r\n        auth: {\r\n            username: process.env.VUE_APP_CLIENTID,\r\n            password: process.env.VUE_APP_CLIENTSECRET,\r\n        },\r\n        data: form\r\n    };\r\n    return instance(requestData);\r\n}\r\n\r\nfunction attemptRefreshToken() {\r\n    store.commit('OPEN_SNACKBAR', setSnackBarInfo('토큰이 만료되어 재발급 합니다.', 'error', 'top'));\r\n    return requestRefreshToken().then(res => {\r\n        setAcessTokenInLocalStorage(res.data.access_token);\r\n        store.commit('OPEN_SNACKBAR', setSnackBarInfo('토큰이 재발급 되었습니다.', 'info', 'top')\r\n        )\r\n    })\r\n        .catch(() => {\r\n            store.commit('OPEN_SNACKBAR', setSnackBarInfo('Refresh Token이 만료되었습니다. 다시 한번 로그인해주세요.', 'error', 'top'))\r\n            store.commit('LOGOUT');\r\n        });\r\n}\r\n\r\nexport default instance;"]}]}