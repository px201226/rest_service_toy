{"remainingRequest":"C:\\Users\\Lee-Gi-Su\\IdeaProjects\\restapi\\springboot_board_with_vuejs\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Lee-Gi-Su\\IdeaProjects\\restapi\\springboot_board_with_vuejs\\src\\api\\http.js","dependencies":[{"path":"C:\\Users\\Lee-Gi-Su\\IdeaProjects\\restapi\\springboot_board_with_vuejs\\src\\api\\http.js","mtime":1610517714445},{"path":"C:\\Users\\Lee-Gi-Su\\IdeaProjects\\restapi\\springboot_board_with_vuejs\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Lee-Gi-Su\\IdeaProjects\\restapi\\springboot_board_with_vuejs\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCBzdG9yZSBmcm9tICcuLi9zdG9yZSc7CmltcG9ydCB7IHNldFRva2VuSW5Mb2NhbFN0b3JhZ2UgfSBmcm9tICIuLi9zdG9yZS90b2tlbiI7CmltcG9ydCB7IHNldFNuYWNrQmFySW5mbyB9IGZyb20gIi4uL2FwaS9jb21tb25fYXBpIjsKdmFyIGluc3RhbmNlID0gYXhpb3MuY3JlYXRlKHsKICAvL2Jhc2VVUkwgOiAiaHR0cDovL2VjMi0xMy0xMjUtMTcwLTIxMC5hcC1ub3J0aGVhc3QtMi5jb21wdXRlLmFtYXpvbmF3cy5jb20iLAogIGJhc2VVUkw6ICJodHRwOi8vbG9jYWxob3N0OjgwODAiLAogIHdpdGhDcmVkZW50aWFsczogdHJ1ZSAvLyDshKTsoJXtlbTslbwg7L+g7YKk6rCAIFJlcXVlc3Tsl5Ag7KCA7J6l65CY7Ja0IOyEuOyFmOydtCDsnKDsp4DrkKgKCn0pOwovKgogICAg66qo65OgIOyalOyyrSDsoIQgaGVhZGVy7JeQIGFjY2Vzc190b2tlbuydhCDri7TslYQg7KCE7Iah7ZWc64ukLgogKi8KCmluc3RhbmNlLmludGVyY2VwdG9ycy5yZXF1ZXN0LnVzZShmdW5jdGlvbiAoY29uZmlnKSB7CiAgdmFyIGp3dFRva2VuID0gc3RvcmUuZ2V0dGVycy5HRVRfSldUX1RPS0VOOwogIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdqd3RUb2tlbicpOwoKICBpZiAoand0VG9rZW4gIT09IG51bGwpIHsKICAgIGNvbmZpZy5oZWFkZXJzLmNvbW1vblsnWC1BVVRILVRPS0VOJ10gPSBqd3RUb2tlbjsKICB9CgogIGNvbnNvbGUubG9nKCdJbnRlcmNlcHRvcnMgUmVxdWVzdCBpcycsIGNvbmZpZywgbmV3IERhdGUoKSk7CiAgcmV0dXJuIGNvbmZpZzsKfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgY29uc29sZS5sb2coJ0ludGVyY2VwdG9ycyBSZXF1ZXN0IEVycm9yIGlzJywgZXJyb3IucmVzcG9uc2UsIG5ldyBEYXRlKCkpOwogIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7Cn0pOwppbnN0YW5jZS5pbnRlcmNlcHRvcnMucmVzcG9uc2UudXNlKGZ1bmN0aW9uIChyZXNwb25zZSkgewogIGNvbnNvbGUubG9nKCdJbnRlcmNlcHRvcnMgUmVzcG9uc2UgaXMgJywgcmVzcG9uc2UsIG5ldyBEYXRlKCkpOwogIHN0b3JlLnN0YXRlLmNvbW1vbi5sb2FkaW5nID0gZmFsc2U7CiAgcmV0dXJuIHJlc3BvbnNlOwp9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICBjb25zb2xlLmxvZygnSW50ZXJjZXB0b3JzIFJlc3BvbnNlIEVycm9yIGlzICcsIGVycm9yLnJlc3BvbnNlLCBuZXcgRGF0ZSgpKTsKICBzdG9yZS5zdGF0ZS5jb21tb24ubG9hZGluZyA9IGZhbHNlOwoKICBpZiAoIWVycm9yLnJlc3BvbnNlKSB7CiAgICBzdG9yZS5jb21taXQoJ05FVFdPUktfRVJST1InKTsKICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7CiAgfQoKICB2YXIgc3RhdHVzID0gZXJyb3IucmVzcG9uc2Uuc3RhdHVzOwoKICBpZiAoc3RhdHVzID09PSA0MDQpIHsKICAgIHN0b3JlLmNvbW1pdCgnUFVTSF9FUlJPUl9QQUdFJyk7CiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwogIH0KCiAgaWYgKHN0YXR1cyA9PT0gNDAwKSB7CiAgICBzdG9yZS5jb21taXQoJ09QRU5fTU9EQUwnLCB7CiAgICAgIHRpdGxlOiAn7JeQ65+sJywKICAgICAgY29udGVudDogIuyeheugpeydtCDsmKzrsJTrpbTsp4Ag7JWK7Iq164uI64ukIiwKICAgICAgb3B0aW9uMTogJ+uLq+q4sCcKICAgIH0pOwogIH0KCiAgaWYgKHN0YXR1cyA9PT0gNDAxKSB7CiAgICB2YXIgZXJyb3JEYXRhID0gZXJyb3IucmVzcG9uc2UuZGF0YTsKCiAgICBpZiAoZXJyb3JEYXRhLmVycm9yICE9PSAnaW52YWxpZF90b2tlbicpIHsKICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKICAgIH0KCiAgICBpZiAoaXNFeHBpcmVkVG9rZW4oZXJyb3JEYXRhKSkgewogICAgICByZXR1cm4gYXR0ZW1wdFJlZnJlc2hUb2tlbigpOwogICAgfSBlbHNlIHsKICAgICAgc3RvcmUuY29tbWl0KCdMT0dPVVRfV0lUSF9UT0tFTl9JTlZBTElERScpOwogICAgICBzdG9yZS5jb21taXQoJ1NFVF9TTkFDS0JBUicsIHNldFNuYWNrQmFySW5mbygn7Yag7YGwIOygleuztOqwgCDsnpjrqrvrkJjsl4jsirXri4jri6QuIOuLpOyLnCDroZzqt7jsnbgg7ZW07KO87IS47JqUJywgJ2Vycm9yJywgJ3RvcCcpKTsKICAgIH0KICB9CgogIGlmIChzdGF0dXMgPT09IDQwMykgewogICAgc3RvcmUuY29tbWl0KCdPUEVOX1NOQUNLQkFSJywgc2V0U25hY2tCYXJJbmZvKCLqtoztlZzsnbQg7JeG7Iq164uI64ukIiwgJ2Vycm9yJywgJ3RvcCcpKTsKICB9CgogIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7Cn0pOwpleHBvcnQgZGVmYXVsdCBpbnN0YW5jZTs="},{"version":3,"sources":["C:/Users/Lee-Gi-Su/IdeaProjects/restapi/springboot_board_with_vuejs/src/api/http.js"],"names":["axios","store","setTokenInLocalStorage","setSnackBarInfo","instance","create","baseURL","withCredentials","interceptors","request","use","config","jwtToken","getters","GET_JWT_TOKEN","localStorage","getItem","headers","common","console","log","Date","error","response","Promise","reject","state","loading","commit","status","title","content","option1","errorData","data","isExpiredToken","attemptRefreshToken"],"mappings":"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","sourcesContent":["import axios from 'axios';\nimport store from '../store';\nimport {setTokenInLocalStorage} from \"../store/token\"\nimport {setSnackBarInfo} from \"../api/common_api\"\nconst instance = axios.create({\n\t//baseURL : \"http://ec2-13-125-170-210.ap-northeast-2.compute.amazonaws.com\",\n\tbaseURL : \"http://localhost:8080\",\n\twithCredentials: true,\t\t\t\t// 설정해야 쿠키가 Request에 저장되어 세션이 유지됨\n});\n\n\n/*\n    모든 요청 전 header에 access_token을 담아 전송한다.\n */\ninstance.interceptors.request.use(\n    config => {\n\t\tlet jwtToken = store.getters.GET_JWT_TOKEN; \n\t\tlocalStorage.getItem('jwtToken');\n        if (jwtToken !== null) {\n\t\t\tconfig.headers.common['X-AUTH-TOKEN'] = jwtToken;\n        }\n         console.log('Interceptors Request is', config, new Date());\n        return config\n    },\n    error => {\n         console.log('Interceptors Request Error is', error.response, new Date());\n        return Promise.reject(error);\n    }\n);\n\n\ninstance.interceptors.response.use(\n   response => {\n\t    console.log('Interceptors Response is ', response, new Date());\n\t   store.state.common.loading = false;\n\t\treturn response;\n   },\n   function (error) {\n\t    console.log('Interceptors Response Error is ', error.response, new Date());\n\t   store.state.common.loading = false;\n\n\t   if (!error.response) {\n\t\t\n\t\t   store.commit('NETWORK_ERROR')\n\t\t   return Promise.reject(error);\n\t   }\n\n\t   let status = error.response.status;\n\t   if (status === 404) {\n\t\t   store.commit('PUSH_ERROR_PAGE');\n\t\t   return Promise.reject(error);\n\t   }\n\n\t   if( status === 400){\n\t\t\tstore.commit('OPEN_MODAL', {title: '에러', content: \"입력이 올바르지 않습니다\", option1: '닫기',});\n\t   }\n\t   if (status === 401) {\n\t\t   let errorData = error.response.data;\n\t\t   if (errorData.error !== 'invalid_token') {\n\t\t\t   return Promise.reject(error);\n\t\t   }\n\n\t\t   if (isExpiredToken(errorData)) {\n\t\t\t   return attemptRefreshToken();\n\t\t   } else {\n\t\t\t   store.commit('LOGOUT_WITH_TOKEN_INVALIDE');\n\t\t\t   store.commit('SET_SNACKBAR', setSnackBarInfo('토큰 정보가 잘못되었습니다. 다시 로그인 해주세요', 'error', 'top'));\n\t\t   }\n\t   }\n\n\t   if(status === 403){\n\t\t\tstore.commit('OPEN_SNACKBAR', setSnackBarInfo(\"권한이 없습니다\", 'error', 'top'))\n\t   }\n\t   return Promise.reject(error);\n   }\n);\n\n\nexport default instance;"]}]}